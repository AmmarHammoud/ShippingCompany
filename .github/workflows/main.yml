name: ðŸš€ Deploy Laravel to SmarterASP

on:
  push:
    branches:
      - main   # deploy only when pushing to main branch

jobs:
  web-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v4

    # Upload Laravel core (without vendor)
    - name: ðŸ“‚ Upload Laravel core
      uses: SamKirkland/FTP-Deploy-Action@v4.3.6
      with:
        server: ${{ secrets.HOST_NAME }}
        username: ${{ secrets.USERNAME }}
        password: ${{ secrets.PASSWORD }}  
        local-dir: ./   # entire project
        server-dir: /htdocs/   # deploy to shippingcompany directly
        exclude: |
          vendor/**
          node_modules/**
          .git/**
          .github/**
          .env
          tests/**
          storage/framework/cache/data/**
          storage/framework/sessions/**
          storage/framework/views/**

    # Upload only public folder ok
    # - name: ðŸ“‚ Upload public folder
    #   uses: SamKirkland/FTP-Deploy-Action@v4.3.6
    #   with:
    #     server: ${{ secrets.HOST_NAME }}
    #     username: ${{ secrets.USERNAME }}
    #     password: ${{ secrets.PASSWORD }} 
    #     local-dir: ./public/
    #     server-dir: /public/
    #     exclude: |
    #       .git/**
    #       node_modules/**
